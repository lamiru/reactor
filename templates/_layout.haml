{% load staticfiles compress bootstrap3 thumbnail %}
!!!
%html
  %head
    %meta{charset: 'utf8'}
    %meta{name: 'viewport', content: 'width=1230'}
    %link{href: '//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css', rel: 'stylesheet'}
    %link{href: '//maxcdn.bootstrapcdn.com/bootswatch/3.3.5/yeti/bootstrap.min.css', rel: 'stylesheet'}
    %link{href: '//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css', rel: 'stylesheet'}
    {% compress css %}
    %link{href: '{% static "sass/layout.sass" %}', type: 'text/x-sass', rel: 'stylesheet'}
    %link{href: '{% static "sass/main.sass" %}', type: 'text/x-sass', rel: 'stylesheet'}
    %link{href: '{% static "sass/theme.sass" %}', type: 'text/x-sass', rel: 'stylesheet'}
    %link{href: '{% static "sass/helpers.sass" %}', type: 'text/x-sass', rel: 'stylesheet'}
    {% endcompress %}
    %script{src: '//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js'}
    %script{src: '//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js'}
    %script{src: '//malsup.github.io/jquery.form.js'}
    %script{src: '//cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.26.5/js/jquery.tablesorter.min.js'}
    %script{src: '//spin.js.org/spin.min.js'}
    %script{src: '{% static "js/jquery-csrf.js" %}'}
    %script{src: '//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js'}
    %title Re:actor
    {% block css %}
    {% endblock %}
  %body
    %nav.navbar.navbar-default
      .container
        .navbar-header
          .brand
            %a{href: '{% url "accounts:index" %}'} Re:actor
          %button.navbar-toggle.collapsed{type: 'button', 'data-toggle': 'collapse', 'data-target': '#navbar', 'aria-expanded': 'false', 'aria-controls': 'navbar'}
            %span.sr-only Toggle navigation
            %span.icon-bar
            %span.icon-bar
            %span.icon-bar
        #navbar.navbar-collapse.collapse
          %ul.nav.navbar-nav.navbar-right.noselect
            {% if user.is_authenticated %}
            %li
              {% if user.user_profile.photo %}
              {% thumbnail user.user_profile.photo "45x45" crop="center" as im %}
              %img{src: '{{ im.url }}', width: '{{ im.width }}', height: '{{ im.height }}'}
              {% endthumbnail %}
              {% else %}
              %img{src: '{% static "images/pica.jpg" %}', width: '45', height: '45'}
              {% endif %}
            %li
              .dropdown
                #dropdown-menu-1.navbar-icon.dropdown-toggle{'aria-expanded': 'false', 'aria-haspopup': 'true', 'data-toggle': 'dropdown'}
                  {% bootstrap_icon 'cog' %}
                %ul.dropdown-menu{'aria-labelledby': 'dropdown-menu-1'}
                  %li
                    %a{href: '{% url "topics:index" %}'} Topics
                    %a{href: '{% url "accounts:my_reactions" %}'} My Reactions
                    %a{href: '{% url "accounts:profile" %}'} Profile
                  %li.divider{role: 'separator'}
                  %li
                    %a{href: '{% url "accounts:logout" %}'} Log out
            {% else %}
            %li
              .dropdown
                #dropdown-menu-1.navbar-icon.dropdown-toggle{'aria-expanded': 'false', 'aria-haspopup': 'true', 'data-toggle': 'dropdown'}
                  {% bootstrap_icon 'cog' %}
                %ul.dropdown-menu{'aria-labelledby': 'dropdown-menu-1'}
                  %li
                    %a{href: '{% url "topics:index" %}'} Topics
                  %li.divider{role: 'separator'}
                  %li
                    %a{href: '{% url "accounts:login" %}'} Log In
                  %li
                    %a{href: '{% url "accounts:signup" %}'} Sign Up
            {% endif %}
    %section.main-section
      {% for message in messages %}
      %aside.alert{class: 'alert-{{ message.tags }}'}
        %a.close{href: '#', 'data-dismiss': 'alert', 'aria-label': 'close'}
          {% bootstrap_icon 'remove' %}
        %span {{ message }}
      {% endfor %}
      {% block content %}
      {% endblock %}
    %footer
      .text-center
        %p &copy; 2016 Re:actor. All Rights Reserved.
    %aside#spin-modal
    :javascript
      var spin_opts = {
        color: '#666'
      }
      var spin_modal = document.getElementById('spin-modal');
      var spinner = new Spinner(spin_opts).spin(spin_modal);
    {% block javascript %}
    {% endblock %}
